this.CCDDiscover=function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t,n){e.exports=n(3)(22)},function(e,t,n){e.exports=n(3)(0)},function(e,t,n){e.exports=n(3)(132)},function(e,t){e.exports=common},function(e,t,n){"use strict";var o,s,i,r=n(19),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){i=!1}function l(e){if(e){if(e!==o){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));o=e,c()}}else o!==a&&(o=a,c())}function p(){return i||(i=function(){o||l(a);for(var e,t=o.split(""),n=[],s=r.nextValue();t.length>0;)s=r.nextValue(),e=Math.floor(s*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||a},characters:function(e){return l(e),o},seed:function(e){r.seed(e),s!==e&&(c(),s=e)},lookup:function(e){return p()[e]},shuffled:p}},function(e,t,n){e.exports=n(17)(407)},function(e,t,n){e.exports=n(3)(107)},function(e,t,n){e.exports=n(3)(291)},function(e,t,n){"use strict";e.exports=n(18)},function(e,t,n){e.exports=n(3)(408)},function(e,t,n){e.exports=n(3)(386)},function(e,t,n){e.exports=n(27)},function(e,t,n){var o;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)&&o.length){var r=s.apply(null,o);r&&e.push(r)}else if("object"===i)for(var a in o)n.call(o,a)&&o[a]&&e.push(a)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()},function(e,t,n){e.exports=n(3)(392)},function(e,t,n){e.exports=n(3)(31)},function(e){e.exports=JSON.parse('{"ccdiscover.pageloadfail.title":"Page not available","ccdiscover.pageloadfail.description":"This page isn’t available right now. Please try again later.","ccdiscover.pageloadfail.retry":"Retry","ccdiscover.admindisabledscreen.title":"You don’t have access to Discover","ccdiscover.admindisabledscreen.description":"The Discover tab contains app-related content for individual plan holders.","ccdiscover.admindisabledscreen.link.learnmore":"Learn More","ccdiscover.admindisabledscreen.link.learnmore.url":"https://helpx.adobe.com/creative-cloud/kb/apps-tab-missing.html","ccdiscover.loading.discover.message":"Loading Discover","ccdiscover.loading.discover.message.ellipses":"Loading Discover...","ccdiscover.sidenav.category.app":"BY APP","ccdiscover.header.productname.arialabel":"Discover {productName}","ccdiscover.header.button.editpreferences":"Edit preferences","ccdiscover.header.button.cta.arialabel":"{action} {productName}","ccdiscover.live.liveLabel":"LIVE","ccdiscover.live.profile.adobeLive":"Adobe Live","ccdiscover.checklist.showChecklist":"Show {linkType}","ccdiscover.checklist.hideChecklist":"Hide {linkType}","ccdiscover.checklist.button.arialabel":"Play {title} video","ccdiscover.duration.min":"min","ccdiscover.tab.tooltip.text":"{productName} added","ccdiscover.genericrow.card.arialabel":"{taskName}, {duration}","ccdiscover.community.button.arialabel":"Ask the {productName} community","ccdiscover.live.currentlive.link.arialabel":"Watch {title} Live on Behance","ccdiscover.behanceprojects.card.ribbon.arialabel":"{name} gallery","ccdiscover.behanceprojects.card.multipleowners.arialabel":"Multiple owners","ccdiscover.behanceprojects.card.featuredIn":"Featured In","ccdiscover.live.card.replay.minutesAgo":"minutes ago","ccdiscover.live.card.replay.hoursAgo":"hours ago","ccdiscover.questionnaire.pagination":"{pageIndex} of {totalPages}","ccdiscover.questionnaire.errortoast.text":"Something went wrong. Please try again later.","ccdiscover.ui.filter.errortoast.text":"Unable to apply content filter.","ccdiscover.visualquestionnaire.errortoast.text":"Unable to set preferences. Please retry.","ccdiscover.tab.title":"Discover","ccdiscover.live.cta.text":"Watch live on Behance","ccdiscover.visual.questionnaire.previousquestion":"Previous Question","ccdiscover.visual.questionnaire.pagination":"QUESTION {pageIndex} OF {totalPages}","ccdiscover.feedbackdialog.description":"Let us know what you were looking for in the textbox below. Your feedback will help us improve the experience for our communiy.","ccdiscover.feedbackdialog.textfield.placeholder":"Type here...","ccdiscover.feedbackdialog.cancel":"Cancel","ccdiscover.feedbackdialog.submit":"Submit","ccdiscover.feedbackdialog.submitted.toast":"Feedback submitted","ccdiscover.live.watchOnBehance":"Watch on Behance","ccdiscover.live.watchOnDesktop":"Watch on desktop","ccdiscover.live.copyLink":"Copy link","ccdiscover.live.nowPlaying":"PLAYING NOW","ccdiscover.live.watchLive":"Watch live","ccdiscover.live.watchReplay":"Watch replay","ccdiscover.live.description":"View description","ccdiscover.live.joinChatOnBehance":"Join live chat on Behance","ccdiscover.live.descriptiondialog.confirmlabel":"Ok","ccdiscover.live.nativePlayerTitle":"Adobe Live Player","ccdiscover.live.nativeplayer.linkoutlabel":"Go to Behance","ccdiscover.hero.banner.cta.open":"Open","ccdiscover.filter.view.coachmark.title":"Select your Interests","ccdiscover.filter.view.coachmark.desc":"Get inspired, hone your skills, and find additional resources for your interests. Updated daily.","ccdiscover.filter.view.coachmark.confirm.ok":"OK"}')},function(e,t,n){const o=n(32);e.exports={components:{main:o.Discover},name:"Discover",route:"/discover",getName:o.getName,initialize:o.initialize,id:"discover"}},function(e,t){e.exports=reactIntl},function(e,t,n){"use strict";var o=n(4),s=n(20),i=n(24),r=n(25)||0;function a(){return s(r)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return r=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=i},function(e,t,n){"use strict";var o=1;e.exports={nextValue:function(){return(o=(9301*o+49297)%233280)/233280},seed:function(e){o=e}}},function(e,t,n){"use strict";var o,s,i=n(21),r=(n(4),1567752802062),a=7;e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-r));return n===s?o++:(o=0,s=n),t+=i(a),t+=i(e),o>0&&(t+=i(o)),t+=i(n)}},function(e,t,n){"use strict";var o=n(4),s=n(22),i=n(23);e.exports=function(e){for(var t,n=0,r="";!t;)r+=i(s,o.get(),1),t=e<Math.pow(16,n+1),n++;return r}},function(e,t,n){"use strict";var o,s="object"==typeof window&&(window.crypto||window.msCrypto);o=s&&s.getRandomValues?function(e){return s.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=o},function(e,t){e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*o*n/t.length),i="";;)for(var r=e(s),a=s;a--;)if((i+=t[r[a]&o]||"").length===+n)return i}},function(e,t,n){"use strict";var o=n(4);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},function(e,t,n){"use strict";e.exports=0},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),i=n(12),r=n.n(i),a=n(13),c=n.n(a),l=(n(28),function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]])}return n});t.default=e=>{const{size:t="M",className:n="",indeterminate:o=!0}=e,i=l(e,["size","className","indeterminate"]);return o?s.a.createElement("div",Object.assign({className:r()("simplified-wait",{"simplified-wait--small":"S"===t,"simplified-wait--medium":"M"===t,"simplified-wait--large":"L"===t},n)},i)):s.a.createElement(c.a,Object.assign({},e))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),i=n(5),r=n(2),a=n(7),c=n.n(a),l=n(0),p=n(6),d=n.n(p),u=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const f="en_US";class g{constructor(e,t=f){this.fetchMessages=e=>new Promise((t,n)=>{this.languageCode!==f?d.a.get(`${e}/${this.languageCode}.json`).then(e=>{this.setMessages(e.data),t()},()=>n()):t()}),this.overrideMessages=e=>{e&&"object"==typeof e&&this.messages&&"object"==typeof this.messages&&this.setMessages(Object.assign({},this.messages,e))},this.messages=e,this.languageCode=t}setMessages(e){this.messages=e}}u([l.observable,h("design:type",Object)],g.prototype,"messages",void 0),u([l.observable,h("design:type",Object)],g.prototype,"languageCode",void 0),u([l.action,h("design:type",Function),h("design:paramtypes",[Object]),h("design:returntype",void 0)],g.prototype,"setMessages",null),u([l.action,h("design:type",Object)],g.prototype,"fetchMessages",void 0);const v={DISCOVER_COMPONENT_ID:"CCDDiscover",DEFAULT_LAYOUT:"default"},y={ONE_UP:"one-up",IN_APP:"in-app",IN_BROWSER:"in-browser",VIDEO:"video"},S={INSTALLED:"installed",UPDATE_AVAILABLE:"available_updates",ACTIVE_SESSIONS:"active_sessions",PANEL:"DiscoverPanel"};var b,m;!function(e){e[e.LOADING_PENDING=0]="LOADING_PENDING",e[e.LOADING_FAILED=1]="LOADING_FAILED",e[e.LOADING_SUCCESS=2]="LOADING_SUCCESS",e[e.LOADING_MASKED=3]="LOADING_MASKED"}(b||(b={})),function(e){e[e.SkeletonData=0]="SkeletonData",e[e.PageData=1]="PageData",e[e.QuestionnaireData=2]="QuestionnaireData"}(m||(m={}));const D="/discover";var A=new class{constructor(){this.skeletonAnalytics={},this.pageAnalytics={},this.questionnaireAnalytics={},this.uisAnalytics={},this.sendAnalytics=e=>{Object.keys(e).forEach(t=>"boolean"!=typeof e[t]&&!e[t]&&delete e[t]);const t={"event.workflow":"Discover"};if("render"===e["event.type"]){const e=me.globalAppStore.get("containerStore");e&&!e.isCCDVisible&&(t["event.context_sequence"]="false")}me.globalAppStore.get("analyticsStore").sendAnalyticsData(Object.assign({},this.uisAnalytics,t,e))}}mergeUISAnalyticsData(){if(0===Object.keys(this.uisAnalytics).length){[this.skeletonAnalytics,this.pageAnalytics,this.questionnaireAnalytics].forEach(e=>{Object.keys(e).forEach(t=>{if(t in this.uisAnalytics){const n=`|${e[t]}`;this.uisAnalytics[t]+=n}else this.uisAnalytics[t]=e[t]})})}}setAnalyticsData(e,t){this.uisAnalytics={};const n={};if(e&&e.analyticsData){const{analyticsData:t}=e;t&&t.abTest&&Object.keys(t.abTest).forEach(e=>{n[e]=t.abTest[e]})}t===m.SkeletonData?this.skeletonAnalytics=n:t===m.PageData?this.pageAnalytics=n:t===m.QuestionnaireData&&(this.questionnaireAnalytics=n),this.mergeUISAnalyticsData()}clearAnalyticsData(e){this.uisAnalytics={},e===m.SkeletonData?this.skeletonAnalytics={}:e===m.PageData?this.pageAnalytics={}:e===m.QuestionnaireData&&(this.questionnaireAnalytics={}),this.mergeUISAnalyticsData()}},O=n(8),C=n.n(O),E=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};const w="v1",I="v3",M="https://cchome.adobe.io",P=(e,t,n,o)=>{const s=(new Date).getTime()-e,i=t.split("/");let r=i.length&&i[i.length-1]||"";const a=ce.getLabelForSection(r);r=a?r:"";let c={};o&&(c=o.response?{"event.error_code":o.response.status,"event.error_desc":o.response.statusText}:{"event.error_code":"undefined","event.error_desc":"undefined"}),A.sendAnalytics(Object.assign({"event.subcategory":"UserSignals","event.type":"api","event.subtype":"response","event.value":s,"env.api.name":t,"event.api.version":n,"content.id":r,"content.name":a},c))};var L=new class{init(e){const{getNamespaceProperty:t}=e.get("c3configStore");this.contentURL=t("accc.discover","UISEndpoint")||M}createRequest(){return d.a.create({baseURL:this.contentURL,headers:{Authorization:`Bearer ${me.globalAppStore.get("identityStore").AccessToken}`,"Content-Type":"application/json",Accept:"application/json","x-api-key":window.appContext.clientId}})}get(e,t,n){const o=new URLSearchParams;return o.append("locale",me.globalAppStore.get("localeStore").locale),o.append("osVersion",window.appContext.osVersion),o.append("productVersion",window.appContext.appVersion),o.append("platform",window.appContext.platform),n.variant&&o.append("variant",n.variant),new Promise((s,i)=>{const r=(new Date).getTime();this.createRequest().get(e,Object.assign({params:o},n)).then(n=>{P(r,e,t),n.data?s(n.data):i(new Error("GET: Empty response received"))}).catch(n=>{P(r,e,t,n),n&&n.response&&401===n.response.status&&me.globalAppStore.get("identityStore").handleAccessTokenInvalidation("CCD Discover","getRequest"),i(n)})})}put(e,t,n,o){return E(this,void 0,void 0,(function*(){return new Promise((s,i)=>{const r=(new Date).getTime();this.createRequest().put(e,t,Object.assign({},o)).then(t=>{P(r,e,n),t.data?s(t.data):i(new Error("PUT: Empty response received"))}).catch(t=>{P(r,e,n,t),t&&t.response&&401===t.response.status&&me.globalAppStore.get("identityStore").handleAccessTokenInvalidation("CCD Discover","putRequest"),i(t)})})}))}post(e,t,n,o){return E(this,void 0,void 0,(function*(){return new Promise((s,i)=>{const r=(new Date).getTime();this.createRequest().post(e,t,Object.assign({},o)).then(t=>{P(r,e,n),t.data?s(t.data):i(new Error("POST: Empty response received"))}).catch(t=>{P(r,e,n,t),t&&t.response&&401===t.response.status&&me.globalAppStore.get("identityStore").handleAccessTokenInvalidation("CCD Discover","postRequest"),i(t)})})}))}getSkeleton(){return this.get(`/ucs/${I}/users/me/surfaces/ccd/contents/discover/context/skeleton`,I,{timeout:6e4})}getDiscover(e,t){return E(this,void 0,void 0,(function*(){const n="FEATURED"===e.toUpperCase()?"featured":e.toUpperCase();return this.get(`/ucs/${I}/users/me/surfaces/ccd/contents/discover/context/${n}`,I,{timeout:6e4,variant:t})}))}setStatus(e,t,n){return E(this,void 0,void 0,(function*(){return this.put(`/int/${w}/users/me/tracks`,{componentType:e,componentId:t,value:n},w,{timeout:6e4})}))}getQuestionnaire(e){return E(this,void 0,void 0,(function*(){const t="FEATURED"===e.toUpperCase()?"featured":e.toUpperCase();return this.get(`/ucs/${I}/users/me/surfaces/ccd/contents/questionnaire/context/${t}`,I,{timeout:6e4})}))}setAnswers(e,t){return E(this,void 0,void 0,(function*(){return this.post(`int/${w}/users/me/surfaces/ccd/context/${e}/answers`,t,w,{timeout:6e4})}))}};function k(e){return e&&e.data&&e.data.experienceDiscoverCreativeDigestByPath&&e.data.experienceDiscoverCreativeDigestByPath.item?e.data.experienceDiscoverCreativeDigestByPath.item:null}function j(e){return e&&Object.prototype.hasOwnProperty.call(e,"plaintext")?e.plaintext||"":"string"==typeof e?e:""}function _(e){return e?e.split("&").join("&amp;").split("<").join("lt").split(">").join("&gt").split("'").join("&apos;").split('"').join("&quot;"):""}function R(e){const t=[];return e&&e.ogg&&t.push({src:e.ogg,type:"video/ogg"}),e&&e.webm&&t.push({src:e.webm,type:"video/webm"}),t.length&&(t[0].trackSrc=e.trackSrc||"",t[0].trackKind=e.trackKind||"subtitles",t[0].trackLang=e.trackLang||"",t[0].trackLabel=e.trackLabel||""),t}var N,T,x,F,V=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},$=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};const U="ContentStore";class B{constructor(){this.contentMap=new Map,this.questionnaireMap=new Map,this.answersMap=new Map,this.questionnaireAnswered=new Map,this.variantMap=new Map,this.init=()=>{this.setWebinarVariantMap()},this.setWebinarVariantMap=()=>{const e=me.globalAppStore.get("featureFlags").getFESData("ccd.discover.webinar");if(e){const{state:t,data:n}=e;try{const e=JSON.parse(n);this.webinarEnabledSapcodes=t?e?e.sapCodes:void 0:[]}catch(e){console.error(`${v.DISCOVER_COMPONENT_ID}: ${U}: init: FeatureFlag 'ccd.discover.webinar' data is corrupt`),this.webinarEnabledSapcodes=void 0}}else this.webinarEnabledSapcodes=[]},this.fetchContentDataForSection=(e,t=!1)=>G(this,void 0,void 0,(function*(){if(!t&&!this.isContentExpired())return this.contentMap.get(e).promise;console.info(`CCDDiscover: ContentStore: fetchContentDataForSection: sectionId: ${e}: forceRefresh: ${t}`);const n={promise:new Promise((t,n)=>{L.getDiscover(e,this.variantMap.get(e)).then(e=>{k(e)?t(e):(console.error(`${v.DISCOVER_COMPONENT_ID}: ${U}: fetchContentDataForSection: data is incorrect`),n())}).catch(e=>n(e))})};return this.contentMap.set(e,n),n.promise})),this.fetchQuestionnaireDataforSection=e=>G(this,void 0,void 0,(function*(){console.info(`CCDDiscover: ContentStore: fetchQuestionnaireDataforSection: sectionId: ${e}`);const t={promise:new Promise((t,n)=>{L.getQuestionnaire(e).then(o=>{if(function(e){if(e&&e.data&&e.data.nujQuestionnaireByPath&&e.data.nujQuestionnaireByPath.item){if(e.previousAnswerList){const{previousAnswerList:t}=e;return Object.assign({},e.data.nujQuestionnaireByPath.item,{previousAnswerList:t})}return e.data.nujQuestionnaireByPath.item}return null}(o)){A.setAnalyticsData(o,m.QuestionnaireData);const{previousAnswerList:n=[]}=o;return n.length&&this.setQuestionnaireAnswered(e,!0),void t(o)}console.error(`${v.DISCOVER_COMPONENT_ID}: ${U}: fetchQuestionnaireDataforSection: data is incorrect`),n()}).catch(e=>n(e)).finally(()=>{this.setQuestionnaireResolved(e)})}),isResolved:!1};return this.questionnaireMap.set(e,t),t.promise})),this.setAnswersDataForSection=(e,t)=>{console.info(`CCDDiscover: ContentStore: setAnswersDataForSection: sectionId: ${e}`);const n={promise:new Promise((o,s)=>{L.setAnswers(e,t).then(t=>{n&&n.guid!==this.getAnswerMapGuid(e)||(this.setQuestionnaireAnswered(e,!0),o(t))}).catch(t=>{n&&n.guid!==this.getAnswerMapGuid(e)||s(t)}).finally(()=>{n&&n.guid===this.getAnswerMapGuid(e)&&this.setAnswerResolved(e)})}),isResolved:!1,guid:C.a.generate()};return this.answersMap.set(e,n),n.promise}}setQuestionnaireAnswered(e,t){this.questionnaireAnswered.set(e,t)}isContentExpired(){return!0}setQuestionnaireResolved(e){if(this.questionnaireMap.has(e)){const t=this.questionnaireMap.get(e);t&&(t.isResolved=!0)}}getQuestionnairePromise(e){if(this.questionnaireMap.has(e))return this.questionnaireMap.get(e)}setAnswerResolved(e){if(this.answersMap.has(e)){const t=this.answersMap.get(e);t&&(t.isResolved=!0)}}getAnswerMapGuid(e){const t=this.answersMap.get(e);let n="";return t&&t.guid&&({guid:n}=t),n}getAnswersPromise(e){if(this.answersMap.has(e))return this.answersMap.get(e)}clearData(){console.info("CCDDiscover: ContentStore: clearData"),this.contentMap.clear(),this.questionnaireMap.clear(),this.answersMap.clear(),this.questionnaireAnswered.clear()}}V([l.observable,$("design:type","function"==typeof(N="undefined"!=typeof Map&&Map)?N:Object)],B.prototype,"contentMap",void 0),V([l.observable,$("design:type","function"==typeof(T="undefined"!=typeof Map&&Map)?T:Object)],B.prototype,"questionnaireMap",void 0),V([l.observable,$("design:type","function"==typeof(x="undefined"!=typeof Map&&Map)?x:Object)],B.prototype,"answersMap",void 0),V([l.observable,$("design:type","function"==typeof(F="undefined"!=typeof Map&&Map)?F:Object)],B.prototype,"questionnaireAnswered",void 0),V([l.action,$("design:type",Function),$("design:paramtypes",[String,Boolean]),$("design:returntype",void 0)],B.prototype,"setQuestionnaireAnswered",null),V([l.action,$("design:type",Object)],B.prototype,"fetchContentDataForSection",void 0),V([l.action,$("design:type",Function),$("design:paramtypes",[String]),$("design:returntype",void 0)],B.prototype,"setQuestionnaireResolved",null),V([l.action,$("design:type",Object)],B.prototype,"fetchQuestionnaireDataforSection",void 0),V([l.action,$("design:type",Function),$("design:paramtypes",[String]),$("design:returntype",void 0)],B.prototype,"setAnswerResolved",null),V([l.action,$("design:type",Object)],B.prototype,"setAnswersDataForSection",void 0),V([l.action,$("design:type",Function),$("design:paramtypes",[]),$("design:returntype",void 0)],B.prototype,"clearData",null);var q=new B,W=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},Q=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},J=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};class H{constructor(){this.rawContent=null,this.showError=!1,this.init=()=>{me.globalAppStore.get("events").on("WebinarRegistrationSuccessful",e=>{q.variantMap.delete(e.info.sapCode),this.fetchPageContent(e.info.sapCode,!0)})},this.currentSectionId=""}setRawContent(e){this.rawContent=e}setErrorState(e){this.showError=e}clearContent(e=!0){console.info(`CCDDiscover: PageStore: clearContent: clearSectionId:${e}`),this.setErrorState(!1),this.setRawContent(null),e&&(this.currentSectionId="")}fetchPageContent(e,t=!1){return J(this,void 0,void 0,(function*(){console.info(`CCDDiscover: PageStore: fetchPageContent: sectionId: ${e}: forceRefresh: fetch page content`),this.setRawContent(null),this.setErrorState(!1),q.fetchContentDataForSection(e,t).then(n=>{if(console.info("CCDDiscover: PageStore: fetchPageContent: fetchContentDataForSection: ",`sectionId: ${e}: `,`forceRefresh: ${t}: `,`currentSectionId: ${this.currentSectionId}`),this.currentSectionId||(this.currentSectionId=e),e!==this.currentSectionId)return void console.info(`${v.DISCOVER_COMPONENT_ID}: PageStore: ignore data for ${e}, current sectionId=${this.currentSectionId}`);A.setAnalyticsData(n,m.PageData);const o=k(n);o.creativeDigestSkeleton&&o.creativeDigestSkeleton.componentSkeletonList&&o.creativeDigestSkeleton.componentSkeletonList.length?(console.info(`${v.DISCOVER_COMPONENT_ID}: PageStore: fetch for ${e}: data is fetched successfully`),this.setRawContent(n)):(console.error(`${v.DISCOVER_COMPONENT_ID}: PageStore: fetch for ${e}: fetched data is incorrect`),this.setErrorState(!0))}).catch(t=>{this.currentSectionId||(this.currentSectionId=e),e===this.currentSectionId?(console.error(`${v.DISCOVER_COMPONENT_ID}: PageStore: fetch for ${e}: error while fetching data, error: ${t&&t.response?t.response.status:void 0}`),this.setErrorState(!0)):console.info(`${v.DISCOVER_COMPONENT_ID}: PageStore: ignore error for ${e}, current sectionId=${this.currentSectionId}`)})}))}}W([l.observable,Q("design:type",Object)],H.prototype,"rawContent",void 0),W([l.observable,Q("design:type",Boolean)],H.prototype,"showError",void 0),W([l.action,Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",void 0)],H.prototype,"setRawContent",null),W([l.action,Q("design:type",Function),Q("design:paramtypes",[Boolean]),Q("design:returntype",void 0)],H.prototype,"setErrorState",null);var K,z,Y,X=new H,Z=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},ee=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},te=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};const ne="com.adobe.acc.discover",oe="SkeletonStore",se="ccd.discover.layouts",ie=(e,t)=>e.firstInstallTriggerTimeStamp||t.firstInstallTriggerTimeStamp?parseInt(t.firstInstallTriggerTimeStamp||"0",10)-parseInt(e.firstInstallTriggerTimeStamp||"0",10):e.sortOrder-t.sortOrder,re=e=>{const t=[],n={path:"",version:"",checksum:""};let o="",s=[];const i=e.data.discoverSkeletonByPath.item;return o=i.layoutId||o,i.layoutJS&&i.layoutJS.layoutsJS&&i.layoutJS.layoutsJS._publishUrl&&(n.path=i.layoutJS.layoutsJS._publishUrl,n.version=i.layoutJS.layoutjsversion||n.version,n.checksum=i.layoutJS.signature.plaintext||n.checksum),i.sectionGroupList&&i.sectionGroupList.length&&i.sectionGroupList.forEach(e=>{if(e){const n={sectionList:(e.sectionList||[]).map(e=>Object.assign({},e,{id:e.inAppId})),title:j(e.title),id:e.inAppId,ingestDescription:e.ingestDescription};t.push(n)}}),i.productsList&&(s=i.productsList),{processedSectionGroupList:t,layoutID:o,layoutJS:n,productsList:s}};class ae{constructor(){this.layoutId="default",this.layoutJSChecksum="",this.productMap=new Map,this.productVisitedStatusMap=new Map,this.coachmarkSeen=new Map,this.inputSectionGroupList=[],this.sectionGroupList=[],this.theme="light",this.byAppSectionData={title:"",ingestDescription:""},this.clearProductMap=()=>{this.productMap.clear()},this.setInputSectionGroupList=e=>{this.inputSectionGroupList=e},this.updateSectionGroupList=()=>{const e=[];this.inputSectionGroupList.forEach(t=>{t.sectionList&&t.sectionList.length&&e.push(t)});const t=[];if(Array.from(this.appsToRender(this.completeAppsList).values()).sort(ie).forEach(({sapcode:e,appFamilyName:n,iconURL:o,backUpIcon:s})=>{this.getProductVisitedStatus(e),t.push({id:e,name:n,icon:o||s})}),t.length&&this.byAppSectionData&&this.byAppSectionData.title&&e.push({sectionList:t,id:"byApp",title:this.byAppSectionData.title,ingestDescription:this.byAppSectionData.ingestDescription}),0===e.length&&console.error(`${v.DISCOVER_COMPONENT_ID}: updateSectionGroupList: No valid sectionGroup present`),e.length&&e[0].sectionList.length){let t=!1;if(e.forEach(e=>{e.sectionList.forEach(e=>{e.id===this.selectedItemId&&(t=!0)})}),!this.selectedItemId||!t){const t=e[0].sectionList[0].id;this.updateSelectedItem(t);try{const e=me.globalAppStore.get("ccdRouter");e&&e.history.location&&e.history.location.pathname&&e.history.location.pathname.includes(D)&&me.routeToSection(t)}catch(e){}}}this.sectionGroupList=e},this.updateStore=e=>te(this,void 0,void 0,(function*(){A.setAnalyticsData(e,m.SkeletonData);const{processedSectionGroupList:t,layoutID:n,layoutJS:o,productsList:s}=re(e);let i="";try{i=yield this.handleDynamicLayout(o)}catch(e){console.warn(`${v.DISCOVER_COMPONENT_ID}: SkeletonStore: updateStore: handleDynamicLayout call failed`)}i&&X.clearContent(),t&&(this.byAppSectionData.title="",this.setInputSectionGroupList(t),this.setByAppData(t),me.setEnabledProductSapcodes(this.byAppSectionData.title?s:[]),this.updateSectionGroupList());const r=!!i||!(!n||n===this.layoutId);return this.setSkeletonLayout(n||this.layoutId),r})),this.setSkeletonLoadingState=e=>{this.skeletonLoadingState=e},this.getAppModel=e=>{let t;return this.getAppsModel().forEach(n=>{e===n.sapcode&&(t=n)}),t},this.getAppForSapcodeAndVersion=(e,t)=>{let n;return this.completeAppsList.forEach(o=>{e===o.sapcode&&t===o.codexVersion&&(n=o)}),n},this.getLabelForSection=e=>{let t="";return this.sectionGroupList.forEach(n=>{n.sectionList.forEach(n=>{n.id===e&&(t=n.name)})}),t},this.isValidProductSapcode=e=>this.productMap.has(e),this.getGroupForSection=e=>{let t;return this.sectionGroupList.forEach(n=>{n.sectionList.some(t=>t.id===e)&&(t=n)}),t},this.getLatestAppForSapcode=e=>{let t;return this.completeAppsList.forEach(n=>{e!==n.sapcode||t&&!this.versionComparator(t.codexVersion,n.codexVersion)||(t=n)}),t},this.getAnalyticsCategoryForSection=e=>{const t=this.getGroupForSection(e);return t?t.ingestDescription:""}}get completeAppsList(){let e=[];return me.appsStore&&(e=me.appsStore.availableAppsList),e}setTheme(e){this.theme=e||"light"}updateSelectedItem(e){this.selectedItemId=e}handleDynamicLayout(e){return console.info("CCDDiscover: SkeletonStore: handleDynamicLayout: check for new layout JS"),new Promise(t=>{if(!(e&&e.path&&e.version&&e.checksum))return void t("");const{appContext:{appVersion:n}}=window;if(this.versionComparator(n,e.version))if(e.checksum&&this.layoutJSChecksum===e.checksum)console.log(`${v.DISCOVER_COMPONENT_ID}: ${oe}: Current layout is same as new layout. Ignoring new layout.`),t("");else{const n=window.app.getFileContent(e.path||"","type1",e.checksum,se);n&&n.then&&"function"==typeof n.then?n.then(n=>{if(n){const o=document.createElement("script");o.textContent=n,document.getElementsByTagName("body")[0].appendChild(o),window.CCDDiscoverLayouts&&window.CCDDiscoverLayouts.default?(console.log(`${v.DISCOVER_COMPONENT_ID}: ${oe}: Loading dynamic CCDDiscoverLayouts`),t(e.checksum)):(console.warn(`${v.DISCOVER_COMPONENT_ID}: ${oe}: CCDDiscoverLayouts not found in window`),t(""))}else console.warn(`${v.DISCOVER_COMPONENT_ID}: ${oe}: Empty layout file`),t("")},e=>{console.log(`${v.DISCOVER_COMPONENT_ID}: ${oe}: Error in getting new layout: ${e}`),t("")}):t("")}else console.log(`${v.DISCOVER_COMPONENT_ID}: ${oe}: New layout is older than the in-build fallback layout. Ignoring new layout.`),t("")})}init(){console.info("CCDDiscover: SkeletonStore: init"),Object(l.reaction)(()=>this.filteredAppsList,()=>{this.isDiscoverProductListUpdated()&&this.updateSectionGroupList()}),me.globalAppStore.get("ccdRouter").startListening(e=>{this.handleRouting(e)})}handleRouting(e){const t=e.pathname;if("/discover"===`/${t.split("/")[1]}`){const n=e.search,o=me.globalAppStore.get("ccdRouter").getRoutingParams(t+n);o&&o.forceRefresh&&"true"===o.forceRefresh.toString()&&me.restartWorkflow()}}setByAppData(e){e.forEach(e=>{"byApp"===e.id&&e.title&&(this.byAppSectionData.title=e.title),"byApp"===e.id&&e.ingestDescription&&(this.byAppSectionData.ingestDescription=e.ingestDescription)})}setProductVisitedStatus(e,t){this.productVisitedStatusMap.set(e,t),me.setPreferenceValue(`${e}.general.productVisitedStatus`,t,!0,!1,!1,ne)}isProductVisited(e){return!this.productVisitedStatusMap.has(e)||!this.productVisitedStatusMap.get(e)}setCoachmarkSeen(e,t){this.coachmarkSeen.set(e,t),me.setPreferenceValue(`${e}.filterview.coachmarkSeen`,t,!0,!1,!1,ne)}updateCoachmarkStatus(e){if(!this.coachmarkSeen.has(e)){me.getPreferenceValue(`${e}.filterview.coachmarkSeen`,!1,!1,!1,ne).then(Object(l.action)(t=>{this.coachmarkSeen.set(e,"true"===t)}))}}setSkeletonLayout(e){this.layoutId=e}getProductVisitedStatus(e){if(!this.productVisitedStatusMap.has(e)){me.getPreferenceValue(`${e}.general.productVisitedStatus`,!1,!1,!1,ne).then(Object(l.action)(t=>{this.productVisitedStatusMap.set(e,"true"===t)}))}}addProductInDiscover(e){console.info(`${v.DISCOVER_COMPONENT_ID}: ${oe}: addProductInDiscover(): appModel=`,e);const t=e&&e.sapcode?this.getLatestAppForSapcode(e.sapcode):void 0;if(t&&me.isDiscoverEnabledApp(e.sapcode)&&!t.isHidden){if(this.productMap.set(t.sapcode,t.codexVersion),this.setProductVisitedStatus(t.sapcode,!0),!this.sectionGroupList.map(e=>e.id).includes("byApp")){if(!this.byAppTitle)return!1;this.sectionGroupList.push({sectionList:[],id:"byApp",title:this.byAppTitle,ingestDescription:this.byAppIngestDescription})}return this.sectionGroupList.forEach(e=>{"byApp"===e.id&&e.sectionList.unshift({id:t.sapcode,name:t.appFamilyName,icon:t.iconURL||t.backUpIcon})}),!0}return!1}isDiscoverProductListUpdated(){let e=!1;return Array.from(this.filteredAppsList.keys()).forEach(t=>{this.getLabelForSection(t)||(e=!0)}),e}getAppsModel(){const e=new Map;return this.productMap.forEach((t,n)=>{this.completeAppsList.forEach(t=>{const{sapcode:o,codexVersion:s}=t;if(o===n)if(e.has(n)){const o=e.get(n);this.versionComparator(o.codexVersion,s)&&e.set(n,t)}else e.set(n,t)})}),e}get filteredAppsList(){return this.appsToRender(this.completeAppsList)}appsToRender(e){return e.forEach(e=>{const{mode:t,sapcode:n,codexVersion:o,isHidden:s}=e;if(me.isDiscoverEnabledApp(n)&&!s)if(t===S.INSTALLED||t===S.UPDATE_AVAILABLE)this.productMap.has(n)||this.productMap.set(n,o);else if(t===S.ACTIVE_SESSIONS){const{progress:t}=e;null!==t&&(this.productMap.has(n)||(this.setProductVisitedStatus(n,!0),this.productMap.set(n,o)))}}),this.getAppsModel()}}Z([l.observable,ee("design:type",String)],ae.prototype,"layoutId",void 0),Z([l.observable,ee("design:type",Object)],ae.prototype,"productVisitedStatusMap",void 0),Z([l.observable,ee("design:type","function"==typeof(K="undefined"!=typeof Map&&Map)?K:Object)],ae.prototype,"coachmarkSeen",void 0),Z([l.observable,ee("design:type","function"==typeof(z=void 0!==b&&b)?z:Object)],ae.prototype,"skeletonLoadingState",void 0),Z([l.observable,ee("design:type",Array)],ae.prototype,"inputSectionGroupList",void 0),Z([l.computed,ee("design:type",Array),ee("design:paramtypes",[])],ae.prototype,"completeAppsList",null),Z([l.observable,ee("design:type",Array)],ae.prototype,"sectionGroupList",void 0),Z([l.observable,ee("design:type",Object)],ae.prototype,"selectedItemId",void 0),Z([l.observable,ee("design:type",Object)],ae.prototype,"theme",void 0),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[Object]),ee("design:returntype",void 0)],ae.prototype,"setTheme",null),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[String]),ee("design:returntype",void 0)],ae.prototype,"updateSelectedItem",null),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[String,Boolean]),ee("design:returntype",void 0)],ae.prototype,"setProductVisitedStatus",null),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[String,Boolean]),ee("design:returntype",void 0)],ae.prototype,"setCoachmarkSeen",null),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[String]),ee("design:returntype",void 0)],ae.prototype,"updateCoachmarkStatus",null),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[String]),ee("design:returntype",void 0)],ae.prototype,"setSkeletonLayout",null),Z([l.action,ee("design:type",Object)],ae.prototype,"setInputSectionGroupList",void 0),Z([l.action,ee("design:type",Function),ee("design:paramtypes",[Object]),ee("design:returntype",Boolean)],ae.prototype,"addProductInDiscover",null),Z([l.action,ee("design:type",Object)],ae.prototype,"updateSectionGroupList",void 0),Z([l.action,ee("design:type",Object)],ae.prototype,"updateStore",void 0),Z([l.action,ee("design:type",Object)],ae.prototype,"setSkeletonLoadingState",void 0),Z([l.computed,ee("design:type","function"==typeof(Y="undefined"!=typeof Map&&Map)?Y:Object),ee("design:paramtypes",[])],ae.prototype,"filteredAppsList",null);var ce=new ae;class le{constructor(){this._hostObject=null,this._hostMessageHandlerFn=null}initialize(e){e&&"object"==typeof e&&(e.hostObject&&"object"==typeof e.hostObject&&(this._hostObject=e.hostObject),e.hostMessageHandlerFn&&"function"==typeof e.hostMessageHandlerFn&&(this._hostMessageHandlerFn=e.hostMessageHandlerFn))}handleMessage(e){}finalize(e){}sendMessage(e){return this._hostObject&&this._hostObject.handleMessage&&"function"==typeof this._hostObject.handleMessage?this._hostObject.handleMessage(e):this._hostMessageHandlerFn?this._hostMessageHandlerFn(e):void 0}sendMessageToJSCore(e,t){return this.sendMessage({targetType:"JSCore",message:e,data:t||{}})}sendMessageToParent(e,t){return this.sendMessage({targetType:"Parent",message:e,data:t||{}})}sendMessageToHost(e,t){return this.sendMessage({targetType:"Host",message:e,data:t||{}})}sendMessageToContainer(e,t){return this.sendMessage({targetType:"Container",message:e,data:t||{}})}sendMessageToApplet(e,t,n,o,s){return this.sendMessage({targetType:"Applet",targetID:n||"",targetVersion:o||"",targetInstanceID:s||"",message:e,data:t||{}})}}var pe=new class extends le{constructor(){super(...arguments),this.subscriberMap=new Map}init(e){this.ccuCore=e,this.register()}register(){this.ccuCore.handleMessage({targetType:"JSCore",message:"RegisterModule",data:{id:"DiscoverPanel_UI",version:"1.0",type:"Applet",instanceID:String(new URL(String(document.location)).searchParams.get("instanceID")),moduleObject:this}})}handleMessage({message:e,data:t}){this.subscriberMap.forEach((n,o)=>{if(o===e)n(t);else if("status"===e){(t&&t.response&&t.response.status&&t.response.status.status)===o&&n(t.response)}})}sendMessageToApplet(e,t,n,o){this.ccuCore.handleMessage({targetType:"Applet",targetID:n,targetVersion:o,message:e,data:t,sourceID:"DiscoverPanel_UI",isAsync:!0})}subscribe(e,t){this.subscriberMap.set(e,t)}};var de,ue=class{constructor(){this.executionCallbackMap=new Map,this.executeStateMachine=()=>{if(this.executionCallbackMap.has(this.currentState)){const e=this.executionCallbackMap.get(this.currentState);e&&e()}},this.setState=e=>{this.currentState=e},this.registerExecutionCallBack=(e,t)=>{this.executionCallbackMap.set(e,t)}}},he=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};!function(e){e[e.FETCH_SKELETON=0]="FETCH_SKELETON",e[e.WAIT_FOR_APPS_DATA=1]="WAIT_FOR_APPS_DATA",e[e.LOAD_COMPLETE=2]="LOAD_COMPLETE"}(de||(de={}));var fe=new class{constructor(){this.stateMachine=new ue,this.handleCFU=e=>{"Manual"===e&&(ce.setSkeletonLoadingState(b.LOADING_PENDING),X.clearContent()),q.variantMap.clear(),q.setWebinarVariantMap(),q.clearData(),ce.clearProductMap(),this.stateMachine.setState(de.FETCH_SKELETON),this.stateMachine.executeStateMachine()},this.fetchSkeleton=()=>he(this,void 0,void 0,(function*(){L.getSkeleton().then(e=>he(this,void 0,void 0,(function*(){if(!("object"==typeof(t=e)&&t&&t.data&&t.data.discoverSkeletonByPath&&t.data.discoverSkeletonByPath.item&&t.data.discoverSkeletonByPath.item.sectionGroupList&&t.data.discoverSkeletonByPath.item.sectionGroupList.length))throw console.error(`${v.DISCOVER_COMPONENT_ID}: Controller: skeleton data is invalid`),new Error("data is invalid");var t;const n=yield ce.updateStore(e);n&&ce.setSkeletonLoadingState(b.LOADING_PENDING),console.info(`${v.DISCOVER_COMPONENT_ID}: Controller: skeleton data is fetched successfully: isSkeletonUpdated: ${n}`),q.webinarEnabledSapcodes?q.webinarEnabledSapcodes.forEach(e=>{e&&me.enabledProductSapcodes.includes(e)&&q.variantMap.set(e,"webinar")}):me.enabledProductSapcodes.forEach(e=>{q.variantMap.set(e,"webinar")}),q.webinarEnabledSapcodes=[],this.stateMachine.setState(de.WAIT_FOR_APPS_DATA),this.stateMachine.executeStateMachine()}))).catch(e=>{console.error(`${v.DISCOVER_COMPONENT_ID}: Controller: error while fetching skeleton data, error: ${e&&e.response?e.response.status:void 0}`),ce.setSkeletonLoadingState(b.LOADING_FAILED)})})),this.checkForAppData=()=>{me.globalAppStore.onStoreRegister("appsStore",()=>{const e=me.globalAppStore.get("appsStore"),{appsPanelLoadStatus:t}=e;Object(l.when)(()=>t.appsListAvailable,()=>{this.stateMachine.currentState===de.WAIT_FOR_APPS_DATA&&(console.info(`${v.DISCOVER_COMPONENT_ID}: Controller: apps data is loaded successfully`),ce.setSkeletonLoadingState(b.LOADING_SUCCESS),this.stateMachine.setState(de.LOAD_COMPLETE))}),Object(l.when)(()=>t.error,()=>{this.stateMachine.currentState===de.WAIT_FOR_APPS_DATA&&(console.error(`${v.DISCOVER_COMPONENT_ID}: Controller: error while fetching apps data`),ce.setSkeletonLoadingState(b.LOADING_FAILED),this.stateMachine.setState(de.LOAD_COMPLETE))}),Object(l.when)(()=>t.masked,()=>{console.info(`${v.DISCOVER_COMPONENT_ID}: Controller: Apps is masked`),ce.setSkeletonLoadingState(b.LOADING_MASKED),this.stateMachine.setState(de.LOAD_COMPLETE)})})},this.startLoadWorkflow=()=>{ce.setSkeletonLoadingState(b.LOADING_PENDING),this.stateMachine.setState(de.FETCH_SKELETON),this.stateMachine.executeStateMachine()},this.stateMachine.registerExecutionCallBack(de.FETCH_SKELETON,this.fetchSkeleton),this.stateMachine.registerExecutionCallBack(de.WAIT_FOR_APPS_DATA,this.checkForAppData),pe.subscribe("Start24HrWorkflow",this.handleCFU)}},ge=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},ve=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ye=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};const Se={DISCOVER_PANEL:"DiscoverPanel",APPS_PANEL:"AppsPanel"};class be{constructor(){this.isMasked=!1,this.enabledProductSapcodes=[],this.isIntentSet=e=>ye(this,void 0,void 0,(function*(){if(!this.enabledProductSapcodes.includes(e))return console.log(`CCDDiscover: DiscoverStore: isIntentSet: sectionId=${e} is not enabled`),!1;try{yield q.fetchQuestionnaireDataforSection(e)}catch(t){return console.warn(`CCDDiscover: DiscoverStore: isIntentSet: Fetch questionnaire failed for ${e} error: `,t),!1}const t=!!q.questionnaireAnswered.get(e);return console.log(`CCDDiscover: DiscoverStore: isIntentSet: sectionId=${e} value=${t}`),t})),this.setActiveSectionId=e=>{ce.updateSelectedItem(e)}}setMasked(e){this.isMasked=e}setEnabledProductSapcodes(e){this.enabledProductSapcodes=e,e.length||A.sendAnalytics({"event.subtype":"log","event.workflow":"Debug","event.type":"debug","ccd.event_type":"info","ccd.event_code":"ccd-discover-empty-product-list","event.subcategory":"CCDDiscover"})}isDiscoverEnabledApp(e){return!(!this.enabledProductSapcodes.includes(e)&&!this.enabledProductSapcodes.includes("ALL"))}init(e){this.globalAppStore=e,e.get("containerStore").isComponentMasked(Se.DISCOVER_PANEL).then(e=>{this.setMasked(e)}),e.onStoreRegister("appsStore",()=>{this.appsStore=e.get("appsStore"),ce.versionComparator=e.get("appsStore").versionComp}),this.getPreferenceValue=e.get("preferencesStore").getValue,this.setPreferenceValue=e.get("preferencesStore").setValue}sendMessageToContainerBL(e,t={}){pe.sendMessageToApplet(e,t,"C3Container_BL","1.0")}sendMessageToAppsBL(e,t){pe.sendMessageToApplet(e,t,"AppsPanel_BL","1.0")}routeToSection(e){if(this.globalAppStore){const t=this.globalAppStore.get("appsStore").availableAppsList.filter(t=>t.sapcode===e);if(t.length)ce.getLabelForSection(e)||ce.addProductInDiscover(t[0]),this.globalAppStore.get("ccdRouter").history.push(`${D}/${e}`);else if(ce.sectionGroupList.length&&ce.sectionGroupList[0].sectionList.length){const e=ce.sectionGroupList[0].sectionList[0].id;this.globalAppStore.get("ccdRouter").history.push(`${D}/${e}`)}}}addProductInDiscover(e){if(this.globalAppStore){const t=this.globalAppStore.get("appsStore").availableAppsList.filter(t=>t.sapcode===e);t.length&&(ce.getLabelForSection(e)||ce.addProductInDiscover(t[0]))}}handleDeeplinkUrl(e,t){return this.globalAppStore.get("deepLinkHandler").handleDeepLink(e,Object.assign({},t,{workflow:"Discover"}))}handleContentfulUrl(e,t=(()=>{})){const n=function(e,t){if(!t)return e;const n=new URL(e);return Object.entries(t).forEach(e=>{n.searchParams.set(e[0],e[1])}),n.toString()}(e.url,e.queryParams);switch(e.targetType){case y.ONE_UP:e.title&&this.globalAppStore.get("webArticle").show(n,{title:e.title,callbacks:{onExit:t}});break;case y.VIDEO:if(e.video){const n=R(e.video);if(n.length){this.globalAppStore.get("videoPlayer").open(n,{onCloseCallback:t})}}break;case y.IN_APP:this.handleDeeplinkUrl(e,{}).then(t);break;case y.IN_BROWSER:if(e.url){const{targetClientID:t,targetScope:o}=e;this.sendMessageToContainerBL("OpenURL",{url:_(n),needSSO:!(!t||!o),clientId:t,scope:o})}t();break;default:console.warn("CCDDiscover: DiscoverStore: handleContentfulUrl: unsupported targetType")}}restartWorkflow(){fe.startLoadWorkflow()}}ge([l.observable,ve("design:type",Boolean)],be.prototype,"isMasked",void 0),ge([l.observable,ve("design:type",Array)],be.prototype,"enabledProductSapcodes",void 0),ge([l.action,ve("design:type",Function),ve("design:paramtypes",[Boolean]),ve("design:returntype",void 0)],be.prototype,"setMasked",null),ge([l.action,ve("design:type",Function),ve("design:paramtypes",[Array]),ve("design:returntype",void 0)],be.prototype,"setEnabledProductSapcodes",null);var me=new be;var De=new class{constructor(){this.getMessage=(e,t)=>this.intl?this.intl.formatMessage({id:e},Object.assign({b:(...e)=>s.a.createElement("b",null,e.join(""))},t)):e}setIntl(e){this.intl=e}},Ae=n(9),Oe=n(10),Ce=n.n(Oe),Ee=(n(26),function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r});const{getMessage:we}=De;let Ie=class extends o.Component{componentDidMount(){const{AnalyticsStore:e}=this.props;e.sendAnalytics({"ccd.event_code":"ACCC_DISCOVER_PANEL_DISABLED","ccd.event_subcode":"ACCC_DISCOVER_PANEL_DISABLED_SCREEN_DISPLAYED","event.subtype":"log","event.workflow":"Debug","event.type":"debug","event.subcategory":"CCDDiscover"})}render(){const{DiscoverStore:e,AnalyticsStore:t}=this.props;return s.a.createElement("div",{className:"discover-masked"},s.a.createElement("div",{className:"masked-title"},s.a.createElement("span",null,we("ccdiscover.admindisabledscreen.title"))),s.a.createElement("div",{className:"masked-description"},s.a.createElement("span",null,we("ccdiscover.admindisabledscreen.description")),s.a.createElement(Ce.a,{tabIndex:0,onClick:()=>{const n=we("ccdiscover.admindisabledscreen.link.learnmore.url");e.handleContentfulUrl({url:n,targetType:y.IN_BROWSER}),t.sendAnalytics({"event.subtype":"log","event.workflow":"Debug","event.type":"debug","ccd.event_type":"click","ccd.event_code":"ccd-discover-masked-learn-more","event.value":n,"event.subcategory":"CCDDiscover"})}},we("ccdiscover.admindisabledscreen.link.learnmore"))))}};Ie=Ee([Object(r.inject)("DiscoverStore","AnalyticsStore")],Ie);var Me=Ie,Pe=n(11),Le=n.n(Pe),ke=(n(29),function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r});const{getMessage:je}=De;let _e=class extends o.Component{render(){return s.a.createElement("div",{className:"discover-spinner-container","aria-busy":"true","aria-live":"polite"},s.a.createElement("div",{className:"discover-spinner","aria-label":je("ccdiscover.loading.discover.message"),role:"status"},s.a.createElement(Le.a,{size:"L"}),s.a.createElement("div",{className:"discover-spinner-text"},je("ccdiscover.loading.discover.message.ellipses"))))}};_e=ke([r.observer],_e);var Re=_e,Ne=n(14),Te=n.n(Ne);n(30);let xe=class extends o.Component{constructor(){super(...arguments),this.getSubCategory=()=>{const{SkeletonStore:e,sectionId:t}=this.props;let n="None";return t&&(n=e.getAnalyticsCategoryForSection(t)),n},this.onClick=()=>{const{retryCallback:e,AnalyticsStore:t,SkeletonStore:n}=this.props,{sectionId:o}=this.props,s=this.getSubCategory(),i=n.getAppModel(o);t.sendAnalytics({"event.subtype":"retry","event.type":"click","event.subcategory":s,"content.id":o,"content.name":i&&i.appFamilyName?i.appFamilyName:""}),e()},this.renderAnalytics=()=>{const{AnalyticsStore:e,SkeletonStore:t}=this.props,{sectionId:n}=this.props,o=this.getSubCategory(),s=t.getAppModel(n);e.sendAnalytics({"event.subtype":"error","event.type":"render","event.subcategory":o,"content.id":n,"content.name":s&&s.appFamilyName?s.appFamilyName:""})}}componentDidMount(){this.renderAnalytics()}render(){const{TranslationStore:{getMessage:e}}=this.props;return s.a.createElement("div",{className:"discover-pageLoadFail"},s.a.createElement("div",{className:"pageLoadFail-title"},s.a.createElement("span",null,e("ccdiscover.pageloadfail.title"))),s.a.createElement("div",{className:"pageLoadFail-description"},s.a.createElement("span",null,e("ccdiscover.pageloadfail.description"))),s.a.createElement(Te.a,{variant:"primary",onClick:this.onClick},e("ccdiscover.pageloadfail.retry")))}};xe=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}([Object(r.inject)("TranslationStore"),Object(r.inject)("DiscoverStore"),Object(r.inject)("SkeletonStore"),Object(r.inject)("AnalyticsStore")],xe);var Fe=xe,Ve=(n(31),function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r});Object(l.configure)({enforceActions:"observed"});let $e=class extends o.Component{componentWillReceiveProps(){const{PageStore:e,match:t}=this.props;t||e.clearContent()}render(){const{props:e}=this,{DiscoverStore:t,SkeletonStore:n,TranslationStore:o}=e,{intl:i}=this.props;o.setIntl(i);const{online:r,getErrorComponent:a}=t.globalAppStore.get("networkState"),c=a();if(!e.match)return null;let l;if(n.skeletonLoadingState===b.LOADING_MASKED||t.isMasked)l=s.a.createElement(Me,null);else if(n.skeletonLoadingState===b.LOADING_FAILED)l=s.a.createElement(Fe,{sectionId:null,retryCallback:t.restartWorkflow});else if(n.skeletonLoadingState===b.LOADING_PENDING)l=s.a.createElement(Re,null);else{const t=n.layoutId||v.DEFAULT_LAYOUT,o=window.CCDDiscoverLayouts.default[t];l=e.match?s.a.createElement(o,Object.assign({},e)):s.a.createElement("div",{key:1})}return s.a.createElement("div",{className:"discover-container"},r?l:c)}};$e=Ve([Object(r.inject)("TranslationStore"),Object(r.inject)("DiscoverStore"),Object(r.inject)("SkeletonStore"),Object(r.inject)("PageStore"),r.observer],$e);var Ge=Object(Ae.withRouter)(Object(i.injectIntl)($e));class Ue extends o.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){const{sectionId:n,onErrorCallback:o}=this.props;console.error(`${v.DISCOVER_COMPONENT_ID}: ErrorBoundary: section ${n}: error: ${e}, info: ${JSON.stringify(t)}`),this.setState({hasError:!0}),o&&o()}render(){const{hasError:e}=this.state,{children:t,errorComponent:n}=this.props;return e?n:t}}var Be=Ue;var qe=new class{constructor(){this.handleProductSessionTrigger=e=>{const{sapCode:t}=e;if(me.isDiscoverEnabledApp(t)){const e=ce.getLatestAppForSapcode(t);if(!ce.productMap.has(t)&&e&&!e.isHidden){ce.addProductInDiscover(e),me.globalAppStore.get("containerStore").setTabStatus(D,"")}}},this.handleRegistrationAck=e=>{null!==this.registrationInterval&&e&&"success"===e.status&&this.registrationInterval&&(clearInterval(this.registrationInterval),this.registrationInterval=void 0)}}initialize(){pe.subscribe("registrationAck",this.handleRegistrationAck),pe.subscribe("appSessionTriggered",this.handleProductSessionTrigger),this.registrationInterval=setInterval(this.registerForAppsStatusMessages,3e3)}registerForAppsStatusMessages(){me.sendMessageToAppsBL("registerForStatusMessages",{})}},We=n(15);n.d(t,"Discover",(function(){return Ye})),n.d(t,"initialize",(function(){return ze})),n.d(t,"getName",(function(){return Ke}));var Qe=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Je=function(e,t,n,o){return new(n||(n=Promise))((function(s,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?s(e.value):new n((function(t){t(e.value)})).then(r,a)}c((o=o.apply(e,t||[])).next())}))};let He;function Ke(){const{messages:e}=He;return e["ccdiscover.tab.title"]}function ze(e,t,n){return Je(this,void 0,void 0,(function*(){const o=e;o.registerStore("discoverStore",me),pe.init(o.get("CCUCore")),qe.initialize();const{locale:s}=o.get("localeStore");He=new g(Object.assign({},We),s),yield function(e){return Je(this,void 0,void 0,(function*(){try{yield He.fetchMessages(`./${e}/translations`)}catch(e){console.warn(`${v.DISCOVER_COMPONENT_ID}: Unable to load locale file for ${He.languageCode}`)}}))}(t),He.overrideMessages(n)}))}let Ye=class extends o.Component{constructor(e){super(e),me.init(e.App),X.init(),ce.init(),L.init(e.App),fe.startLoadWorkflow(),ce.setTheme(e.theme),q.init()}componentWillReceiveProps(e){ce.setTheme(e.theme)}handleDragOver(e){e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="none"}render(){const{languageCode:e,messages:t}=He,n=e.split("_")[0],{theme:s}=this.props;return o.createElement(i.IntlProvider,{locale:n,messages:t},o.createElement("div",{className:"cdisco",style:{height:"100%"},onDragOver:this.handleDragOver},o.createElement(c.a,{theme:s||"light",className:"ccd-discover-provider",style:{height:"100%"}},o.createElement(r.Provider,{key:"CCDDiscoverStores",TranslationStore:De,DiscoverStore:me,SkeletonStore:ce,ContentStore:q,UISStore:L,PageStore:X,AnalyticsStore:A},o.createElement(Be,{sectionId:"Discover",onErrorCallback:()=>{ce.setSkeletonLoadingState(b.LOADING_FAILED)},errorComponent:o.createElement(Fe,{sectionId:null,retryCallback:me.restartWorkflow})},o.createElement(Ge,Object.assign({},this.props)))))))}};Ye=function(e,t,n,o){var s,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}([Object(r.inject)("App"),r.observer,Qe("design:paramtypes",[Object])],Ye)}]);